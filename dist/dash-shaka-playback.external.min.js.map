{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dash-shaka-playback.external.min.js","webpack:///webpack/bootstrap 9643c9c53f7bc1d934b3","webpack:///./src/clappr-dash-shaka-playback.js","webpack:///external {\"amd\":\"clappr\",\"commonjs\":\"clappr\",\"commonjs2\":\"clappr\",\"root\":\"Clappr\"}","webpack:///external \"shaka\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","writable","setPrototypeOf","__proto__","_get","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_clappr","_shakaPlayer","_shakaPlayer2","obj","default","DashShakaPlayback","_HTML5Video","options","_this","_levels","autoPlay","play","player","Player","version","_player","set","id","_this2","_currentLevelId","isAuto","trigger","Events","PLAYBACK_LEVEL_SWITCH_START","configure","abr","enabled","selectTrack","videoTracks","filter","t","PLAYBACK_LEVEL_SWITCH_END","resource","mimeType","arguments","polyfill","installAll","browserSupported","isBrowserSupported","resourceParts","split","match","indexOf","_enableHls","isEnabled","SHAKA_READY","_setup","isReady","once","_src","el","src","event","Log","error","highDefinition","_this3","clearInterval","sendStatsId","_sendStats","unload","then","_isShakaReadyState","catch","isLive","track","_onAdaptation","isEnable","textTracks","_shakaTTVisible","Array","from","kind","forEach","mode","_ccIsSetup","hasClosedCaptionsTracks","PLAYBACK_SUBTITLE_AVAILABLE","trackId","closedCaptionsTrackId","_this4","_destroy","destroy","_this5","_createPlayer","_options","shakaConfiguration","shakaOnBeforeLoad","load","_loaded","e","_setupError","addEventListener","_onError","bind","_onBuffering","buffering","PLAYBACK_BUFFERING","PLAYBACK_BUFFERFULL","_startToSendStats","_fillLevels","_checkForClosedCaptions","map","videoTrack","label","height","reverse","PLAYBACK_LEVELS_AVAILABLE","levels","_this6","intervalMs","shakaSendStatsInterval","setInterval","PLAYBACK_STATS_ADD","getStats","err","PLAYBACK_ERROR","activeVideo","active","debug","PLAYBACK_HIGHDEFINITIONUPDATE","PLAYBACK_BITRATE","bandwidth","width","level","getTextTracks","getVariantTracks","startsWith","language","tracks","closedCaptionsTracks","showingTrack","find","warn","info","selectTextTrack","_enableShakaTextTrack","_ccTrackId","PLAYBACK_SUBTITLE_CHANGED","HTML5Video"],"mappings":"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","file":"dash-shaka-playback.external.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"clappr\"), require(\"shaka\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"clappr\", \"shaka\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DashShakaPlayback\"] = factory(require(\"clappr\"), require(\"shaka\"));\n\telse\n\t\troot[\"DashShakaPlayback\"] = factory(root[\"Clappr\"], root[\"shaka\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"clappr\"), require(\"shaka\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"clappr\", \"shaka\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DashShakaPlayback\"] = factory(require(\"clappr\"), require(\"shaka\"));\n\telse\n\t\troot[\"DashShakaPlayback\"] = factory(root[\"Clappr\"], root[\"shaka\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _clappr = __webpack_require__(1);\n\nvar _shakaPlayer = __webpack_require__(2);\n\nvar _shakaPlayer2 = _interopRequireDefault(_shakaPlayer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SEND_STATS_INTERVAL_MS = 30 * 1e3;\nvar DEFAULT_LEVEL_AUTO = -1;\n\nvar DashShakaPlayback = function (_HTML5Video) {\n  _inherits(DashShakaPlayback, _HTML5Video);\n\n  _createClass(DashShakaPlayback, [{\n    key: 'name',\n    get: function get() {\n      return 'dash_shaka_playback';\n    }\n  }, {\n    key: 'shakaVersion',\n    get: function get() {\n      return _shakaPlayer2.default.player.Player.version;\n    }\n  }, {\n    key: 'shakaPlayerInstance',\n    get: function get() {\n      return this._player;\n    }\n  }, {\n    key: 'levels',\n    get: function get() {\n      return this._levels;\n    }\n  }, {\n    key: 'currentLevel',\n    set: function set(id) {\n      var _this2 = this;\n\n      this._currentLevelId = id;\n      var isAuto = this._currentLevelId === DEFAULT_LEVEL_AUTO;\n\n      this.trigger(_clappr.Events.PLAYBACK_LEVEL_SWITCH_START);\n      if (!isAuto) {\n        this._player.configure({ abr: { enabled: false } });\n        this.selectTrack(this.videoTracks.filter(function (t) {\n          return t.id === _this2._currentLevelId;\n        })[0]);\n      } else {\n        this._player.configure({ abr: { enabled: true } });\n      }\n      this.trigger(_clappr.Events.PLAYBACK_LEVEL_SWITCH_END);\n    },\n    get: function get() {\n      return this._currentLevelId || DEFAULT_LEVEL_AUTO;\n    }\n  }], [{\n    key: 'canPlay',\n    value: function canPlay(resource) {\n      var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      _shakaPlayer2.default.polyfill.installAll();\n      var browserSupported = _shakaPlayer2.default.Player.isBrowserSupported();\n      var resourceParts = resource.split('?')[0].match(/.*\\.(.*)$/) || [];\n      return browserSupported && (resourceParts[1] === 'mpd' || mimeType.indexOf('application/dash+xml') > -1 || DashShakaPlayback._enableHls && (resourceParts[1] === 'm3u8' || mimeType === 'application/x-mpegURL' || mimeType === 'application/vnd.apple.mpegurl'));\n    }\n  }, {\n    key: 'withHls',\n    value: function withHls() {\n      var isEnabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      DashShakaPlayback._enableHls = !!isEnabled;\n      return DashShakaPlayback;\n    }\n  }, {\n    key: 'Events',\n    get: function get() {\n      return {\n        SHAKA_READY: 'shaka:ready'\n      };\n    }\n  }]);\n\n  function DashShakaPlayback(options) {\n    _classCallCheck(this, DashShakaPlayback);\n\n    var _this = _possibleConstructorReturn(this, (DashShakaPlayback.__proto__ || Object.getPrototypeOf(DashShakaPlayback)).call(this, options));\n\n    _this._levels = [];\n    options.autoPlay && _this.play();\n    return _this;\n  }\n\n  _createClass(DashShakaPlayback, [{\n    key: 'play',\n    value: function play() {\n      if (!this._player) {\n        this._setup();\n      }\n\n      if (!this.isReady) {\n        this.once(DashShakaPlayback.Events.SHAKA_READY, this.play);\n        return;\n      }\n\n      this._src = this.el.src;\n      _get(DashShakaPlayback.prototype.__proto__ || Object.getPrototypeOf(DashShakaPlayback.prototype), 'play', this).call(this);\n    }\n\n    // skipping setup `setupSrc` on tag video\n\n  }, {\n    key: 'setupSrc',\n    value: function setupSrc() {}\n\n    // skipping ready event on video tag in favor of ready on shaka\n\n  }, {\n    key: '_ready',\n    value: function _ready() {}\n  }, {\n    key: 'error',\n\n\n    // skipping error handling on video tag in favor of error on shaka\n    value: function error(event) {\n      _clappr.Log.error('an error was raised by the video tag', event, this.el.error);\n    }\n  }, {\n    key: 'isHighDefinitionInUse',\n    value: function isHighDefinitionInUse() {\n      return !!this.highDefinition;\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this3 = this;\n\n      clearInterval(this.sendStatsId);\n      this._sendStats();\n\n      this._player.unload().then(function () {\n        _get(DashShakaPlayback.prototype.__proto__ || Object.getPrototypeOf(DashShakaPlayback.prototype), 'stop', _this3).call(_this3);\n        _this3._player = null;\n        _this3._isShakaReadyState = false;\n      }).catch(function () {\n        _clappr.Log.error('shaka could not be unloaded');\n      });\n    }\n  }, {\n    key: 'getPlaybackType',\n    value: function getPlaybackType() {\n      return (this._player && this._player.isLive() ? 'live' : 'vod') || '';\n    }\n  }, {\n    key: 'selectTrack',\n    value: function selectTrack(track) {\n      this._player.selectTrack(track);\n      this._onAdaptation();\n    }\n\n    /**\n     * @override\n     */\n\n  }, {\n    key: '_enableShakaTextTrack',\n    value: function _enableShakaTextTrack(isEnable) {\n      // Shaka player use only one TextTrack object with video element to handle all text tracks\n      // It must be enabled or disabled in addition to call selectTextTrack()\n      if (!this.el.textTracks) {\n        return;\n      }\n\n      this._shakaTTVisible = isEnable;\n\n      Array.from(this.el.textTracks).filter(function (track) {\n        return track.kind === 'subtitles';\n      }).forEach(function (track) {\n        return track.mode = isEnable === true ? 'showing' : 'hidden';\n      });\n    }\n  }, {\n    key: '_checkForClosedCaptions',\n    value: function _checkForClosedCaptions() {\n      if (this._ccIsSetup) {\n        return;\n      }\n\n      if (this.hasClosedCaptionsTracks) {\n        this.trigger(_clappr.Events.PLAYBACK_SUBTITLE_AVAILABLE);\n        var trackId = this.closedCaptionsTrackId;\n        this.closedCaptionsTrackId = trackId;\n      }\n      this._ccIsSetup = true;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this4 = this;\n\n      clearInterval(this.sendStatsId);\n\n      if (this._player) {\n        this._destroy();\n      } else {\n        this._player.destroy().then(function () {\n          return _this4._destroy();\n        }).catch(function () {\n          _this4._destroy();\n          _clappr.Log.error('shaka could not be destroyed');\n        });\n      }\n    }\n  }, {\n    key: '_setup',\n    value: function _setup() {\n      var _this5 = this;\n\n      this._isShakaReadyState = false;\n      this._ccIsSetup = false;\n      this._player = this._createPlayer();\n      this._options.shakaConfiguration && this._player.configure(this._options.shakaConfiguration);\n      this._options.shakaOnBeforeLoad && this._options.shakaOnBeforeLoad(this._player);\n\n      var playerLoaded = this._player.load(this._options.src);\n      playerLoaded.then(function () {\n        return _this5._loaded();\n      }).catch(function (e) {\n        return _this5._setupError(e);\n      });\n    }\n  }, {\n    key: '_createPlayer',\n    value: function _createPlayer() {\n      var player = new _shakaPlayer2.default.Player(this.el);\n      player.addEventListener('error', this._onError.bind(this));\n      player.addEventListener('adaptation', this._onAdaptation.bind(this));\n      player.addEventListener('buffering', this._onBuffering.bind(this));\n      return player;\n    }\n  }, {\n    key: '_onBuffering',\n    value: function _onBuffering(e) {\n      var event = e.buffering ? _clappr.Events.PLAYBACK_BUFFERING : _clappr.Events.PLAYBACK_BUFFERFULL;\n      this.trigger(event);\n    }\n  }, {\n    key: '_loaded',\n    value: function _loaded() {\n      this._isShakaReadyState = true;\n      this.trigger(DashShakaPlayback.Events.SHAKA_READY);\n      _get(DashShakaPlayback.prototype.__proto__ || Object.getPrototypeOf(DashShakaPlayback.prototype), '_ready', this).call(this);\n      this._startToSendStats();\n      this._fillLevels();\n      this._checkForClosedCaptions();\n    }\n  }, {\n    key: '_fillLevels',\n    value: function _fillLevels() {\n      if (this._levels.length === 0) {\n        this._levels = this.videoTracks.map(function (videoTrack) {\n          return { id: videoTrack.id, label: videoTrack.height + 'p' };\n        }).reverse();\n        this.trigger(_clappr.Events.PLAYBACK_LEVELS_AVAILABLE, this.levels);\n      }\n    }\n  }, {\n    key: '_startToSendStats',\n    value: function _startToSendStats() {\n      var _this6 = this;\n\n      var intervalMs = this._options.shakaSendStatsInterval || SEND_STATS_INTERVAL_MS;\n      this.sendStatsId = setInterval(function () {\n        return _this6._sendStats();\n      }, intervalMs);\n    }\n  }, {\n    key: '_sendStats',\n    value: function _sendStats() {\n      this.trigger(_clappr.Events.PLAYBACK_STATS_ADD, this._player.getStats());\n    }\n  }, {\n    key: '_setupError',\n    value: function _setupError(err) {\n      this._onError(err);\n    }\n  }, {\n    key: '_onError',\n    value: function _onError(err) {\n      _clappr.Log.error('Shaka error event:', err);\n      this.trigger(_clappr.Events.PLAYBACK_ERROR, err, this.name);\n    }\n  }, {\n    key: '_onAdaptation',\n    value: function _onAdaptation() {\n      var activeVideo = this.videoTracks.filter(function (t) {\n        return t.active === true;\n      })[0];\n\n      this._fillLevels();\n\n      _clappr.Log.debug('an adaptation has happened:', activeVideo);\n      this.highDefinition = activeVideo.height >= 720;\n      this.trigger(_clappr.Events.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinition);\n      this.trigger(_clappr.Events.PLAYBACK_BITRATE, {\n        bandwidth: activeVideo.bandwidth,\n        width: activeVideo.width,\n        height: activeVideo.height,\n        level: activeVideo.id\n      });\n    }\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      _get(DashShakaPlayback.prototype.__proto__ || Object.getPrototypeOf(DashShakaPlayback.prototype), 'destroy', this).call(this);\n      this._isShakaReadyState = false;\n      _clappr.Log.debug('shaka was destroyed');\n    }\n  }, {\n    key: 'isReady',\n    get: function get() {\n      return this._isShakaReadyState;\n    }\n  }, {\n    key: 'textTracks',\n    get: function get() {\n      return this._player && this._player.getTextTracks();\n    }\n  }, {\n    key: 'audioTracks',\n    get: function get() {\n      return this._player && this._player.getVariantTracks().filter(function (t) {\n        return t.mimeType.startsWith('audio/');\n      });\n    }\n  }, {\n    key: 'videoTracks',\n    get: function get() {\n      return this._player && this._player.getVariantTracks().filter(function (t) {\n        return t.mimeType.startsWith('video/');\n      });\n    }\n  }, {\n    key: 'closedCaptionsTracks',\n    get: function get() {\n      var id = 0;\n      var trackId = function trackId() {\n        return id++;\n      };\n      var tracks = this.textTracks || [];\n\n      return tracks.filter(function (track) {\n        return track.kind === 'subtitle';\n      }).map(function (track) {\n        return { id: trackId(), name: track.label || track.language, track: track };\n      });\n    }\n\n    /**\n     * @override\n     */\n\n  }, {\n    key: 'closedCaptionsTrackId',\n    get: function get() {\n      return _get(DashShakaPlayback.prototype.__proto__ || Object.getPrototypeOf(DashShakaPlayback.prototype), 'closedCaptionsTrackId', this);\n    }\n\n    /**\n     * @override\n     */\n    ,\n    set: function set(trackId) {\n      if (!this._player) {\n        return;\n      }\n\n      var tracks = this.closedCaptionsTracks;\n      var showingTrack = void 0;\n\n      // Note: -1 is for hide all tracks\n      if (trackId !== -1) {\n        showingTrack = tracks.find(function (track) {\n          return track.id === trackId;\n        });\n        if (!showingTrack) {\n          _clappr.Log.warn('Track id \"' + trackId + '\" not found');\n          return;\n        }\n        if (this._shakaTTVisible && showingTrack.track.active === true) {\n          _clappr.Log.info('Track id \"' + trackId + '\" already showing');\n          return;\n        }\n      }\n\n      if (showingTrack) {\n        this._player.selectTextTrack(showingTrack.track);\n        this._enableShakaTextTrack(true);\n      } else {\n        this._enableShakaTextTrack(false);\n      }\n\n      this._ccTrackId = trackId;\n      this.trigger(_clappr.Events.PLAYBACK_SUBTITLE_CHANGED, {\n        id: trackId\n      });\n    }\n  }]);\n\n  return DashShakaPlayback;\n}(_clappr.HTML5Video);\n\nexports.default = DashShakaPlayback;\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// dash-shaka-playback.external.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9643c9c53f7bc1d934b3","import {HTML5Video, Log, Events} from 'clappr'\nimport shaka from 'shaka-player'\n\nconst SEND_STATS_INTERVAL_MS = 30 * 1e3\nconst DEFAULT_LEVEL_AUTO = -1\n\nclass DashShakaPlayback extends HTML5Video {\n  static get Events () {\n    return {\n      SHAKA_READY: 'shaka:ready'\n    }\n  }\n\n  static canPlay (resource, mimeType = '') {\n    shaka.polyfill.installAll()\n    var browserSupported = shaka.Player.isBrowserSupported()\n    var resourceParts = resource.split('?')[0].match(/.*\\.(.*)$/) || []\n    return browserSupported && ((resourceParts[1] === 'mpd') || mimeType.indexOf('application/dash+xml') > -1 ||  (DashShakaPlayback._enableHls && ((resourceParts[1] === 'm3u8') || mimeType === 'application/x-mpegURL' || mimeType === 'application/vnd.apple.mpegurl' )))\n  }\n\n  static withHls(isEnabled=true) {\n    DashShakaPlayback._enableHls = !!isEnabled\n    return DashShakaPlayback\n  }\n\n  get name () {\n    return 'dash_shaka_playback'\n  }\n\n  get shakaVersion () {\n    return shaka.player.Player.version\n  }\n\n  get shakaPlayerInstance () {\n    return this._player\n  }\n\n  get levels () {\n    return this._levels\n  }\n\n  set currentLevel (id) {\n    this._currentLevelId = id\n    var isAuto = this._currentLevelId === DEFAULT_LEVEL_AUTO\n\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_START)\n    if (!isAuto) {\n      this._player.configure({abr: {enabled: false}})\n      this.selectTrack(this.videoTracks.filter((t) => t.id === this._currentLevelId)[0])\n    }\n    else {\n      this._player.configure({abr: {enabled: true}})\n    }\n    this.trigger(Events.PLAYBACK_LEVEL_SWITCH_END)\n  }\n\n  get currentLevel () {\n    return this._currentLevelId || DEFAULT_LEVEL_AUTO\n  }\n\n  constructor (options) {\n    super(options)\n    this._levels = []\n    options.autoPlay && this.play()\n  }\n\n  play () {\n    if (!this._player) {\n      this._setup()\n    }\n\n    if (!this.isReady) {\n      this.once(DashShakaPlayback.Events.SHAKA_READY, this.play)\n      return\n    }\n\n    this._src = this.el.src\n    super.play()\n  }\n\n  // skipping setup `setupSrc` on tag video\n  setupSrc () {}\n\n  // skipping ready event on video tag in favor of ready on shaka\n  _ready () {}\n\n  get isReady () {\n    return this._isShakaReadyState\n  }\n\n  // skipping error handling on video tag in favor of error on shaka\n  error (event) {\n    Log.error('an error was raised by the video tag', event, this.el.error)\n  }\n\n  isHighDefinitionInUse () {\n    return !!this.highDefinition\n  }\n\n  stop () {\n    clearInterval(this.sendStatsId)\n    this._sendStats()\n\n    this._player.unload().then(() => {\n      super.stop()\n      this._player = null\n      this._isShakaReadyState = false\n    }).catch(() => {\n      Log.error('shaka could not be unloaded')\n    })\n  }\n\n  get textTracks () {\n    return this._player && this._player.getTextTracks()\n  }\n\n  get audioTracks () {\n    return this._player && this._player.getVariantTracks().filter((t) => t.mimeType.startsWith('audio/'))\n  }\n\n  get videoTracks () {\n    return this._player && this._player.getVariantTracks().filter((t) => t.mimeType.startsWith('video/'))\n  }\n\n  getPlaybackType () {\n    return (this._player && this._player.isLive() ? 'live' : 'vod') || ''\n  }\n\n  selectTrack (track) {\n    this._player.selectTrack(track)\n    this._onAdaptation()\n  }\n\n  /**\n   * @override\n   */\n  get closedCaptionsTracks() {\n    let id = 0\n    let trackId = () => { return id++ }\n    let tracks = this.textTracks || []\n\n    return tracks\n      .filter(track => track.kind === 'subtitle')\n      .map(track => { return {id: trackId(), name: track.label || track.language, track: track} })\n  }\n\n  /**\n   * @override\n   */\n  get closedCaptionsTrackId() {\n    return super.closedCaptionsTrackId\n  }\n\n  /**\n   * @override\n   */\n  set closedCaptionsTrackId(trackId) {\n    if (!this._player) {\n      return\n    }\n\n    let tracks = this.closedCaptionsTracks\n    let showingTrack\n\n    // Note: -1 is for hide all tracks\n    if (trackId !== -1) {\n      showingTrack = tracks.find(track => track.id === trackId)\n      if (!showingTrack) {\n        Log.warn(`Track id \"${trackId}\" not found`)\n        return\n      }\n      if (this._shakaTTVisible && showingTrack.track.active === true) {\n        Log.info(`Track id \"${trackId}\" already showing`)\n        return\n      }\n    }\n\n    if (showingTrack) {\n      this._player.selectTextTrack(showingTrack.track)\n      this._enableShakaTextTrack(true)\n    } else {\n      this._enableShakaTextTrack(false)\n    }\n\n    this._ccTrackId = trackId\n    this.trigger(Events.PLAYBACK_SUBTITLE_CHANGED, {\n      id: trackId\n    })\n  }\n\n  _enableShakaTextTrack(isEnable) {\n    // Shaka player use only one TextTrack object with video element to handle all text tracks\n    // It must be enabled or disabled in addition to call selectTextTrack()\n    if (!this.el.textTracks) {\n      return\n    }\n\n    this._shakaTTVisible = isEnable\n\n    Array.from(this.el.textTracks)\n      .filter(track => track.kind === 'subtitles')\n      .forEach(track => track.mode = isEnable === true ? 'showing' : 'hidden')\n  }\n\n  _checkForClosedCaptions() {\n    if (this._ccIsSetup) {\n      return\n    }\n\n    if (this.hasClosedCaptionsTracks) {\n      this.trigger(Events.PLAYBACK_SUBTITLE_AVAILABLE)\n      const trackId = this.closedCaptionsTrackId\n      this.closedCaptionsTrackId = trackId\n    }\n    this._ccIsSetup = true\n  }\n\n  destroy () {\n    clearInterval(this.sendStatsId)\n\n    if (this._player) {\n      this._destroy()\n    } else {\n      this._player.destroy()\n        .then(() => this._destroy())\n        .catch(() => {\n          this._destroy()\n          Log.error('shaka could not be destroyed')\n        })\n    }\n  }\n\n  _setup () {\n    this._isShakaReadyState = false\n    this._ccIsSetup = false\n    this._player = this._createPlayer()\n    this._options.shakaConfiguration && this._player.configure(this._options.shakaConfiguration)\n    this._options.shakaOnBeforeLoad && this._options.shakaOnBeforeLoad(this._player)\n\n    var playerLoaded = this._player.load(this._options.src)\n    playerLoaded.then(() => this._loaded())\n      .catch((e) => this._setupError(e))\n  }\n\n  _createPlayer () {\n    var player = new shaka.Player(this.el)\n    player.addEventListener('error', this._onError.bind(this))\n    player.addEventListener('adaptation', this._onAdaptation.bind(this))\n    player.addEventListener('buffering', this._onBuffering.bind(this))\n    return player\n  }\n\n  _onBuffering (e) {\n    var event = e.buffering ? Events.PLAYBACK_BUFFERING : Events.PLAYBACK_BUFFERFULL\n    this.trigger(event)\n  }\n\n  _loaded () {\n    this._isShakaReadyState = true\n    this.trigger(DashShakaPlayback.Events.SHAKA_READY)\n    super._ready()\n    this._startToSendStats()\n    this._fillLevels()\n    this._checkForClosedCaptions()\n  }\n\n  _fillLevels () {\n    if (this._levels.length === 0) {\n      this._levels = this.videoTracks.map((videoTrack) => { return {id: videoTrack.id, label: `${videoTrack.height}p`} }).reverse()\n      this.trigger(Events.PLAYBACK_LEVELS_AVAILABLE, this.levels)\n    }\n  }\n\n  _startToSendStats () {\n    const intervalMs = this._options.shakaSendStatsInterval || SEND_STATS_INTERVAL_MS\n    this.sendStatsId = setInterval(() => this._sendStats(), intervalMs)\n  }\n\n  _sendStats () {\n    this.trigger(Events.PLAYBACK_STATS_ADD, this._player.getStats())\n  }\n\n  _setupError (err) {\n    this._onError(err)\n  }\n\n  _onError (err) {\n    Log.error('Shaka error event:', err)\n    this.trigger(Events.PLAYBACK_ERROR, err, this.name)\n  }\n\n  _onAdaptation () {\n    var activeVideo = this.videoTracks.filter((t) => t.active === true)[0]\n\n    this._fillLevels()\n\n    Log.debug('an adaptation has happened:', activeVideo)\n    this.highDefinition = (activeVideo.height >= 720)\n    this.trigger(Events.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinition)\n    this.trigger(Events.PLAYBACK_BITRATE, {\n      bandwidth: activeVideo.bandwidth,\n      width: activeVideo.width,\n      height: activeVideo.height,\n      level: activeVideo.id\n    })\n  }\n\n  _destroy () {\n    super.destroy()\n    this._isShakaReadyState = false\n    Log.debug('shaka was destroyed')\n  }\n}\n\nexport default DashShakaPlayback\n\n\n\n// WEBPACK FOOTER //\n// ./src/clappr-dash-shaka-playback.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"amd\":\"clappr\",\"commonjs\":\"clappr\",\"commonjs2\":\"clappr\",\"root\":\"Clappr\"}\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"shaka\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}